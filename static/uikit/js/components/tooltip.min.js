/*! For license information please see tooltip.min.js.LICENSE.txt */
!function(t,i){"object"==typeof exports&&typeof module<"u"?module.exports=i(require("uikit-util")):"function"==typeof define&&define.amd?define("uikittooltip",["uikit-util"],i):(t=typeof globalThis<"u"?globalThis:t||self).UIkitTooltip=i(t.UIkit.util)}(this,(function(t){"use strict";var i={mixins:[{props:{container:Boolean},data:{container:!0},computed:{container(i){let{container:o}=i;return!0===o&&this.$container||o&&t.$(o)}}},{props:{cls:Boolean,animation:"list",duration:Number,velocity:Number,origin:String,transition:String},data:{cls:!1,animation:[!1],duration:200,velocity:.2,origin:!1,transition:"ease",clsEnter:"uk-togglabe-enter",clsLeave:"uk-togglabe-leave",initProps:{overflow:"",height:"",paddingTop:"",paddingBottom:"",marginTop:"",marginBottom:"",boxShadow:""},hideProps:{overflow:"hidden",height:0,paddingTop:0,paddingBottom:0,marginTop:0,marginBottom:0,boxShadow:"none"}},computed:{hasAnimation(t){let{animation:i}=t;return!!i[0]},hasTransition(t){let{animation:i}=t;return this.hasAnimation&&!0===i[0]}},methods:{toggleElement(i,o,e){return new Promise((s=>Promise.all(t.toNodes(i).map((i=>{const s=t.isBoolean(o)?o:!this.isToggled(i);if(!t.trigger(i,"before"+(s?"show":"hide"),[this]))return Promise.reject();e||(t.Animation.cancel(i),t.Transition.cancel(i));const n=(t.isFunction(e)?e:!1!==e&&this.hasAnimation?this.hasTransition?function(i){let{isToggled:o,duration:e,velocity:s,initProps:n,hideProps:h,transition:a,_toggle:l}=i;return(i,r)=>{const d=t.Transition.inProgress(i),p=i.hasChildNodes()?t.toFloat(t.css(i.firstElementChild,"marginTop"))+t.toFloat(t.css(i.lastElementChild,"marginBottom")):0,c=t.isVisible(i)?t.height(i)+(d?0:p):0;t.Transition.cancel(i),o(i)||l(i,!0),t.height(i,""),t.fastdom.flush();const u=t.height(i)+(d?0:p);return e=s*i.offsetHeight+e,t.height(i,c),(r?t.Transition.start(i,{...n,overflow:"hidden",height:u},Math.round(e*(1-c/u)),a):t.Transition.start(i,h,Math.round(e*(c/u)),a).then((()=>l(i,!1)))).then((()=>t.css(i,n)))}}(this):function(i){return(o,e)=>{t.Animation.cancel(o);const{animation:s,duration:n,_toggle:h}=i;return e?(h(o,!0),t.Animation.in(o,s[0],n,i.origin)):t.Animation.out(o,s[1]||s[0],n,i.origin).then((()=>h(o,!1)))}}(this):this._toggle)(i,s),h=s?this.clsEnter:this.clsLeave;t.addClass(i,h),t.trigger(i,s?"show":"hide",[this]);const a=()=>{t.removeClass(i,h),t.trigger(i,s?"shown":"hidden",[this]),this.$update(i)};return n?n.then(a,(()=>(t.removeClass(i,h),Promise.reject()))):a()}))).then(s,t.noop)))},isToggled(i){return void 0===i&&(i=this.$el),[i]=t.toNodes(i),!!t.hasClass(i,this.clsEnter)||!t.hasClass(i,this.clsLeave)&&(this.cls?t.hasClass(i,this.cls.split(" ")[0]):t.isVisible(i))},_toggle(i,o){if(!i)return;let e;o=Boolean(o),this.cls?(e=t.includes(this.cls," ")||o!==t.hasClass(i,this.cls),e&&t.toggleClass(i,this.cls,t.includes(this.cls," ")?void 0:o)):(e=o===i.hidden,e&&(i.hidden=!o)),t.$$("[autofocus]",i).some((i=>t.isVisible(i)?i.focus()||!0:i.blur())),e&&(t.trigger(i,"toggled",[o,this]),this.$update(i))}}},{props:{pos:String,offset:null,flip:Boolean},data:{pos:"bottom-"+(t.isRtl?"right":"left"),flip:!0,offset:!1},connected(){this.pos=this.$props.pos.split("-").concat("center").slice(0,2),this.axis=t.includes(["top","bottom"],this.pos[0])?"y":"x"},methods:{positionAt(i,o,e){const[s,n]=this.pos;let h=t.toPx(!1===this.offset?t.getCssVar("position-offset",i):this.offset,"x"===this.axis?"width":"height",i);h=[t.includes(["left","top"],s)?-h:+h,0];const a={element:[t.flipPosition(s),n],target:[s,n]};if("y"===this.axis){for(const t in a)a[t]=a[t].reverse();h=h.reverse()}t.positionAt(i,o,{attach:a,offset:h,boundary:e,flip:this.flip,viewportOffset:t.toPx(t.getCssVar("position-viewport-offset",i))})}}}],args:"title",props:{delay:Number,title:String},data:{pos:"top",title:"",delay:0,animation:["uk-animation-scale-up"],duration:100,cls:"uk-active"},beforeConnect(){var i;this._hasTitle=t.hasAttr(this.$el,"title"),t.attr(this.$el,"title",""),this.updateAria(!1),i=this.$el,t.isFocusable(i)||t.attr(i,"tabindex","0")},disconnected(){this.hide(),t.attr(this.$el,"title",this._hasTitle?this.title:null)},methods:{show(){this.isToggled(this.tooltip||null)||!this.title||(this._unbind=t.once(document,"show keydown "+t.pointerDown,this.hide,!1,(i=>i.type===t.pointerDown&&!t.within(i.target,this.$el)||"keydown"===i.type&&27===i.keyCode||"show"===i.type&&i.detail[0]!==this&&i.detail[0].$name===this.$name)),clearTimeout(this.showTimer),this.showTimer=setTimeout(this._show,this.delay))},async hide(){t.matches(this.$el,"input:focus")||(clearTimeout(this.showTimer),this.isToggled(this.tooltip||null)&&(await this.toggleElement(this.tooltip,!1,!1),t.remove(this.tooltip),this.tooltip=null,this._unbind()))},_show(){this.tooltip=t.append(this.container,'<div class="uk-'+this.$options.name+'"> <div class="uk-'+this.$options.name+'-inner">'+this.title+"</div> </div>"),t.on(this.tooltip,"toggled",((i,o)=>{if(this.updateAria(o),!o)return;this.positionAt(this.tooltip,this.$el);const[e,s]=function(i,o,e){let[s,n]=e;const h=t.offset(i),a=t.offset(o),l=[["left","right"],["top","bottom"]];for(const t of l){if(h[t[0]]>=a[t[1]]){s=t[1];break}if(h[t[1]]<=a[t[0]]){s=t[0];break}}const r=t.includes(l[0],s)?l[1]:l[0];return n=h[r[0]]===a[r[0]]?r[0]:h[r[1]]===a[r[1]]?r[1]:"center",[s,n]}(this.tooltip,this.$el,this.pos);this.origin="y"===this.axis?t.flipPosition(e)+"-"+s:s+"-"+t.flipPosition(e)})),this.toggleElement(this.tooltip,!0)},updateAria(i){t.attr(this.$el,"aria-expanded",i)}},events:{focus:"show",blur:"hide",[t.pointerEnter+" "+t.pointerLeave](i){t.isTouch(i)||this[i.type===t.pointerEnter?"show":"hide"]()},[t.pointerDown](i){t.isTouch(i)&&this.show()}}};return typeof window<"u"&&window.UIkit&&window.UIkit.component("tooltip",i),i}));